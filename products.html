<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Management - Optix CRM</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- Styles to match the Screenshot --- */
        .filter-section {
            background-color: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 12px;
        }
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            align-items: center;
        }
        .filter-group {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }
        .filter-group label {
            margin-right: 10px;
            color: #555;
            font-weight: 500;
            white-space: nowrap;
        }
        .filter-group input, .filter-group select {
            border: 1px solid #ccc;
            padding: 4px;
            border-radius: 3px;
            width: 100%;
        }
        .radio-group {
            grid-column: span 4;
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 10px;
            font-weight: bold;
            color: #444;
        }
        .search-btn-container {
            grid-column: span 4;
            text-align: center;
            margin-top: 10px;
        }
        .btn-search {
            background: #03a9f4;
            color: white;
            border: none;
            padding: 6px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .table-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            background: #f1f1f1;
            padding: 5px;
            border: 1px solid #ddd;
        }
        .action-buttons button {
            background: #03a9f4;
            color: white;
            border: none;
            padding: 5px 10px;
            margin-left: 5px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
        }
        /* Table Detail Styles */
        .product-table th { background-color: #555; color: white; padding: 8px; font-size: 12px; }
        .product-table td { font-size: 12px; padding: 8px; border-bottom: 1px solid #eee; vertical-align: middle; }
        .price-cell div { margin-bottom: 2px; }
        
        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: #fff; margin: 5% auto; padding: 20px; border: 1px solid #888; width: 70%; border-radius: 5px; max-height: 80vh; overflow-y: auto; }
    </style>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>`r`n<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script></head>
<body>
    <div class="top-bar">
    <div class="nav-icons">
        <div class="nav-icon bg-black" style="width:60px"><i class="fas fa-glasses"></i></div>
        <a href="home.html"><div class="nav-icon bg-green"><i class="fas fa-home"></i></div></a>
        <a href="dashboard.html"><div class="nav-icon bg-orange"><i class="fas fa-tachometer-alt"></i></div></a>
        <div class="nav-icon bg-blue"><i class="fas fa-search"></i></div>
        <div class="nav-icon bg-yellow"><i class="fas fa-th"></i></div>
        <div class="nav-icon bg-purple"><i class="fas fa-cog"></i></div>
        <div class="nav-icon bg-red"><i class="fas fa-user"></i></div>
    </div>
    <div class="user-info">
    <strong>Welcome, Admin</strong><br>
    <span id="liveClock">Online</span>
    <div style="margin-top:5px;">
        <a href="#" onclick="performLogout()" style="color:#ff9800; font-weight:bold; text-decoration:none; font-size:11px;">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>
</div>
</div>

    <div class="main-menu">
        <div class="menu-item">
            <i class="fas fa-box"></i> PRODUCTS <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
            <div class="dropdown-content">
                <a href="products.html">Add New Product</a>
                <a href="products.html">Product List</a>
                <a href="products.html">Frame</a>
                <a href="products.html">Sunglasses</a>
                <a href="products.html">Lens</a>
                <a href="products.html">Contact Lens</a>
                <a href="products.html">Solution</a>
                <a href="products.html">Other</a>
                <a href="products.html">Non-Chargeable</a>
            </div>
        </div>

        <div class="menu-item">
            <i class="fas fa-clipboard-list"></i> INVENTORY <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
            <div class="dropdown-content">
                <a href="inventory.html">Inventory Levels</a>
                <a href="inventory.html">Transfer Stock</a>
                <a href="inventory.html">Transfer Using Barcode</a>
                <a href="inventory.html">Transfer History</a>
                <a href="audit.html" style="color:rgb(243, 243, 237); font-weight:bold;">Inventory Audit</a> 
                <a href="inventory.html">Stock Movement</a>
                <a href="barcode.html">Track Barcode</a>
            </div>
        </div>
        
        <div class="menu-item">
            <i class="fas fa-shopping-cart"></i> SALES <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
            <div class="dropdown-content">
                <a href="order.html">Create New Order</a>
                <a href="sales_history.html?view=pending">Pending Orders</a>
                <a href="sales_history.html?view=history">Sales History</a>
                <a href="sales_history.html?view=return">Sales Return</a>
                <a href="sales_history.html?view=statement">Daily Statement PDF</a>
                <a href="invoice.html">Create Bulk Invoice</a>
            </div>
        </div>

        <div class="menu-item">
            <i class="fas fa-users"></i> CUSTOMER <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
             <div class="dropdown-content">
                <a href="customer.html">Add Customer</a>
                <a href="customer.html">Customer List</a>
                <a href="customer.html">DND Customers</a>
                <a href="customer.html">Customer Label</a>
                <a href="customer.html">Birthday List</a>
            </div>
        </div>

        <a href="reports.html" class="menu-item"><i class="fas fa-chart-bar"></i> REPORTS</a>

        <div class="menu-item">
            <i class="fas fa-sms"></i> SMS <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
             <div class="dropdown-content">
                <a href="sms.html">Send Bulk SMS</a>
                <a href="sms.html">SMS Account History</a>
                <a href="sms.html">SMS Purchase History</a>
                <a href="sms.html">Feedback SMS/WhatsApp</a>
                <a href="sms.html">Sender ID's</a>
            </div>
        </div>

        <div class="menu-item">
            <i class="fas fa-file-medical"></i> PRESCRIPTION <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
            <div class="dropdown-content">
                <a href="prescription.html">Add Prescription</a>
                <a href="prescription.html">Prescription Database</a>
                <a href="prescription.html">Patient Details</a>
                <a href="prescription.html">Appointments</a>
            </div>
        </div>

        <div class="menu-item">
            <i class="fas fa-lock"></i> ACCOUNT <i class="fas fa-caret-down" style="font-size:10px; margin-left:3px;"></i>
            <div class="dropdown-content" style="min-width:240px; right:0; left:auto;">
                <a href="expense.html">Expenses</a>
                <a href="accounts.html">Ledgers</a>
                <a href="accounts.html">Group Ledgers</a>
                <a href="accounts.html">Vouchers</a>
                <a href="accounts.html">Account Payable</a>
                <a href="accounts.html">Account Receivable</a>
                <a href="accounts.html">Account Statement</a>
                <a href="accounts.html">Trading, P/L Statement</a>
            </div>
        </div>
    </div>

    <div class="billing-container">
        <div class="filter-section">
            <h3 style="margin-top:0; color:#333; border-bottom:1px solid #ddd; padding-bottom:5px;">Product Search</h3>
            <div class="filter-grid">
                <div class="filter-group">
                    <label>Category :</label>
                    <select id="fCat">
                        <option value="">All Categories</option>
                        <option>Frame</option>
                        <option>Lens</option>
                        <option>Sunglasses</option>
                        <option>Contact Lens</option>
                        <option>Solution</option>
                        <option>Other</option>
                    </select>
                </div>

                <div class="filter-group"><label>Barcode :</label><input type="text" id="fCode"></div>
                <div class="filter-group"><label>Name / Model :</label><input type="text" id="fName"></div>
                <div class="filter-group"><label>Brand :</label><input type="text" id="fBrand"></div>
                
                <div class="filter-group"><label>Color :</label><input type="text" id="fColor"></div>
                <div class="filter-group"><label>Size :</label><input type="text" id="fSize"></div>
                <div class="filter-group"><label>Gender :</label><select id="fGender"><option value="">All</option><option>Male</option><option>Female</option><option>Unisex</option></select></div>
                <div class="filter-group"><label>Material :</label><input type="text" id="fMaterial"></div>
            </div>
            <div class="search-btn-container">
                <button class="btn-search" onclick="loadProducts()"><i class="fas fa-search"></i> Search</button>
            </div>
        </div>

        <div class="table-actions">
            <div>
                Records Per Page : 
                <select onchange="loadProducts()" id="rowsPerPage"><option>10</option><option>25</option></select>
            </div>
            <div class="action-buttons">
                <button onclick="openAddModal()"><i class="fas fa-plus"></i> Add New Product</button>
                <button style="background:#f44336"><i class="fas fa-trash"></i> Delete Selected</button>
            </div>
        </div>

        <div class="product-table-container">
            <table class="product-table" style="width:100%">
                <thead>
                    <tr>
                        <th style="width:30px"><input type="checkbox"></th>
                        <th style="width:30px">#</th>
                        <th>Barcode</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Inventory</th>
                        <th>Status</th>
                        <th>Created On</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="productListBody">
                    </tbody>
            </table>
        </div>
    </div>
     <div id="addModal" class="modal">
    <div class="modal-content" style="width: 90%; max-width: 1200px; background: #f1f8e9; padding: 0; border: 1px solid #81c784;">
        
        <div style="background: white; padding: 10px 20px; border-bottom: 2px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin:0; color:#333;">Add Inventory</h3>
            <button onclick="closeAddModal()" style="background:#0288d1; color:white; border:none; padding:5px 15px; cursor:pointer;">Go Back To List &rarr;</button>
        </div>

        <div style="padding: 20px;">
            <div style="color:blue; font-weight:bold; margin-bottom:15px; font-size:13px;">
                Select product type to show respective product parameters
            </div>

            <div class="inv-grid">
                <div class="form-group">
                    <label style="color:red">*Product Type :</label>
                    <select id="nType" onchange="toggleFields()">
                        <option value="Frame">Frame</option>
                        <option value="Lens">Lens</option>
                        <option value="Sunglasses">Sunglasses</option>
                        <option value="Contact Lens">Contact Lens</option>
                        <option value="Solution">Solution</option>
                        <option value="Box">Box</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label style="color:red">*Tax Rule :</label>
                    <select id="nTax">
                        <option value="Not Applicable">Not Applicable</option>
                        <option value="Include">Include GST</option>
                        <option value="Exclude">Exclude GST</option>
                    </select>
                </div>
            </div>

            <div class="inv-grid">
                <div class="form-group">
                    <label>Barcode :</label>
                    <input type="text" id="nCode" placeholder="Leave blank for auto-generate">
                </div>
                <div class="form-group" style="flex:2">
                    <label>Name / Model :</label>
                    <input type="text" id="nName">
                </div>
                <div class="form-group">
                    <label>Brand :</label>
                    <input type="text" id="nBrand">
                </div>
                <div class="form-group">
                    <label>Gender :</label>
                    <select id="nGender"><option>Unisex</option><option>Male</option><option>Female</option><option>Kids</option></select>
                </div>
            </div>

            <div id="frameParams" class="inv-grid" style="border-top:1px dashed #ccc; padding-top:10px; margin-top:10px;">
                <div class="form-group"><label>Color :</label><input type="text" id="nColor"></div>
                <div class="form-group"><label>Size :</label><input type="text" id="nSize"></div>
                <div class="form-group"><label>Shape :</label><input type="text" id="nShape"></div>
                <div class="form-group"><label>Material :</label><input type="text" id="nMaterial"></div>
                <div class="form-group"><label>Temple Detail :</label><input type="text" id="nTemple"></div>
                <div class="form-group"><label>Bridge Size :</label><input type="text" id="nBridge"></div>
            </div>

            <div style="margin-top:20px; background:#e8f5e9; border:1px solid #c8e6c9; padding:15px; border-radius:4px;">
                <div class="inv-grid">
                    <div class="form-group">
                        <label style="color:red">*Quantity :</label>
                        <input type="number" id="nQty" value="1" style="width:100px; font-weight:bold;">
                    </div>
                    <div class="form-group">
                        <button style="background:#42a5f5; color:white; border:none; padding:6px 10px; cursor:pointer; font-size:11px; margin-top:15px;">Get Old Purchase Prices &rarr;</button>
                    </div>
                </div>

                <div class="inv-grid" style="margin-top:10px;">
                    <div class="form-group"><label>Purchase Price :</label><input type="number" id="nBuy" placeholder="0.00"></div>
                    <div class="form-group"><label>Retail Price :</label><input type="number" id="nSell" placeholder="0.00"></div>
                </div>

                <div style="margin-top:15px; font-size:12px;">
                    <div style="margin-bottom:5px;">
                        <strong>Track Inventory : </strong>
                        <input type="radio" name="trackInv" value="yes" checked> Yes
                        <input type="radio" name="trackInv" value="no"> No
                    </div>
                    <div>
                        <strong>Barcode Options : </strong>
                        <label><input type="radio" name="barcodeOpt" value="unique" checked> System Generated / Unique (10 items = 10 codes)</label>
                        <label style="margin-left:15px;"><input type="radio" name="barcodeOpt" value="common"> Common / Duplicate (10 items = 1 code)</label>
                    </div>
                </div>
            </div>

            <div style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;">
                <div style="color:red; font-size:11px;">
                    <strong>Note:</strong><br>
                    1. If adding Contact Lens, price is per box.<br>
                    2. System will automatically generate barcodes if field is empty.
                </div>
                <button onclick="saveNewInventory()" style="background:#0288d1; color:white; border:none; padding:10px 30px; font-size:14px; font-weight:bold; cursor:pointer; border-radius:3px;">
                    Add Inventory &rarr;
                </button>
            </div>

        </div>
    </div>
</div>

<style>
    /* STYLES FOR NEW INVENTORY FORM */
    .inv-grid { display: flex; flex-wrap: wrap; gap: 15px; align-items: flex-end; }
    .form-group { display: flex; flex-direction: column; }
    .form-group label { font-size: 11px; color: #555; font-weight: bold; margin-bottom: 3px; text-align: right; margin-right: 5px; }
    .form-group input, .form-group select { 
        padding: 5px; border: 1px solid #ccc; border-radius: 2px; font-size: 12px; min-width: 120px;
    }
    .form-group input:focus { border-color: #2196f3; outline: none; }
</style>

    <script src="script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", loadProducts);
        function openAddModal() {
            document.getElementById('addModal').style.display = 'block';
            if (typeof resetProductModalForAdd === 'function') resetProductModalForAdd();
        }
        function closeAddModal() {
            document.getElementById('addModal').style.display = 'none';
            if (typeof resetProductModalForAdd === 'function') resetProductModalForAdd();
        }
    </script>
</body>
</html>



